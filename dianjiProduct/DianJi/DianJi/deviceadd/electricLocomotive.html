<!doctype html>
<html>

	<head>
		<meta charset="utf-8">
		<title></title>
		<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
		<link href="../css/mui.css" rel="stylesheet" />
		<link rel="stylesheet" type="text/css" href="../css/common.css" />
		<script src="../js/vue.min.js"></script>
		<link href="../css/mui.picker.css" rel="stylesheet" />
		<link href="../css/mui.poppicker.css" rel="stylesheet" />
		<style>
			.mui-input-row label{
				color: #00A680;
				font-size: 12px;
				text-align: right;
			}
			.mui-input-row input{
				text-align: left;
				padding-top: 12px;
			}
			#kehuName #kehuFenChang{
				margin-top: 15px;
				text-align: left;
			}
		</style>
	</head>

	<body>
		<header class="mui-bar mui-bar-nav" id="head">
			<a class="mui-action-back mui-icon mui-icon-left-nav mui-pull-left"></a>
			<h1 class="mui-title">新增电动机车</h1>
		</header>
		<div class="mui-content">
			<form class="mui-input-group">
				<div class="mui-input-row">
					<label>客户名称：</label>
					<input id="kehuName" type="button" value="点此选择" />
				</div>
				<div class="mui-input-row">
					<label>分厂：</label>
					<input id="kehuFenChang" type="button" value="点此选择" />
				</div>
				<div class="mui-input-row">
					<label>设备名称：</label>
					<input type="text" placeholder="请输入设备名称" />
				</div>
				<div class="mui-input-row">
					<label>设备编号：</label>
					<input type="text" placeholder="请输入设备编号" />
				</div>
				<div class="mui-input-row">
					<label>出厂时间：</label>
					<input type="date" value="2000-01-01" />
				</div>
				<div class="mui-input-row">
					<label>配备电机功率(KW)：</label>
					<input type="text" placeholder="请输入配备电机功率" />
				</div>
				<div class="mui-input-row">
					<label>配备电机台数<br />(标准6台)：</label>
					<input type="text" placeholder="请输入配备电机台数" />
				</div>
			</form>
		</div>
		<script src="../js/mui.js"></script>
		<script src="../js/jquery.min.js"></script>
		<script src="../js/url_all.js"></script>
		<script src="../js/mui.picker.js"></script>
		<script src="../js/mui.poppicker.js"></script>
		<script type="text/javascript">
			mui.init()
			mui.plusReady(function() {
				var companyArray = new Array();
				var reginArray = new Array();
				var companyID = null;
				var regionID = null;

				getInitCompany();

				function getInitCompany() {
					$.ajax({
						type: "get",
						url: commen_gain_company_map_Interface,
						async: true,
						dataType: "json",
						success: function(respData) {
							var dataArray = respData.data;
							for (var i = 0; i < dataArray.length; i++) {
								var subRegionArray = dataArray[i].region_list;
								var company_region = new Array();
								for (var j = 0; j < subRegionArray.length; j++) {
									var obj_subRegion = {
										value: subRegionArray[j].id,
										text: subRegionArray[j].region_name
									}
									company_region.push(obj_subRegion);
								}

								var obj_company = {
									value: dataArray[i].id,
									text: dataArray[i].company_name,
									children: company_region
								};
								companyArray.push(obj_company)
							}
						}
					});
				}

                $('#kehuName').on('tap',function(){
					console.log("++++++++++++")
					var userPicker = new mui.PopPicker();
					var setdataArray = new Array();
					userPicker.setData(companyArray);
					var strid = "kehuName";
					var userResult = document.getElementById(strid);
					userPicker.show(function(items) {
						userResult.value = items[0].text;
						companyID = items[0].value;
						regionID = null;
						reginArray = items[0].children;
						$("#kehuFenChang").val("");
					});
					
				})
				
				//选择分厂
				$("#kehuFenChang").click(function() {
					var userPicker = new mui.PopPicker();
					userPicker.setData(reginArray);
					var strid = "kehuFenChang";
					var userResult = document.getElementById(strid);
					userPicker.show(function(items) {
						userResult.value = items[0].text;
						regionID = items[0].value;
					});
				})


			})
		</script>
	</body>

</html>
