<!DOCTYPE html>
<html>

	<head>
		<meta charset="UTF-8">
		<title>设备信息</title>
		<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
		<link href="css/mui.min.css" rel="stylesheet" type="text/css" />
		<link href="css/iconfont.css" rel="stylesheet" type="text/css" />

		<script src="js/mui.min.js"></script>
		<script src="js/url_all.js"></script>
		<script src="js/jquery.min.js"></script>
		<script src="js/vue.min.js"></script>
		<script type="text/javascript">
			mui.init();
		</script>

	</head>

	<body>

		<header class="mui-bar mui-bar-nav" style="background-color: #524598;">
			<a style="color: white;" id="backIDs" class="mui-icon mui-icon-left-nav mui-pull-left"></a>
			<h1 id="titleText" class="mui-title mui_header_title" style="color: white;">设备信息</h1>
		</header>
		<div class="mui-content">
			<div class="mui-card" style="margin-bottom: 50px;">
				<div class="mui-card-header" id="cardHeaderID">
					<div style="width: 100%;font-weight: 700;">
						<p>物联网通信控制器</p>
						<p style="height: 1px;margin-top: -15px;"></p>
						<p>设备编号：{{simMessage.serial_no}}</p>
						<p style="height: 1px;margin-top: -15px;"></p>
						<p>设备型号：{{simMessage.sim_name}}</p>
						<p style="height: 1px;margin-top: -15px;"></p>
						<!--//0：工作，1：失联，2：关机，3：休眠，4：故障 5：已激活 6：未激活 7:待激活-->
						<div v-if="simMessage.state == 0">
							<p style="">设备状态：*工作</p>
						</div>
						<div v-if="simMessage.state == 1">
							<p style="">设备状态：*失联</p>
						</div>
						<div v-if="simMessage.state == 2">
							<p style="">设备状态：*关机</p>
						</div>
						<div v-if="simMessage.state == 3">
							<p style="">设备状态：*休眠</p>
						</div>
						<div v-if="simMessage.state == 4">
							<p style="">设备状态：*故障</p>
						</div>
						<div v-if="simMessage.state == 5">
							<p style="">设备状态：*已激活</p>
						</div>
						<div v-if="simMessage.state == 6">
							<p style="">设备状态：*未激活</p>
						</div>
						<div v-if="simMessage.state == 7">
							<p style="">设备状态：*待激活</p>
						</div>

					</div>

				</div>
				<div class="mui-card-content" id="cardContentID">
					<ul class="mui-table-view">
						<li class="mui-table-view-cell" v-for="sensorList in sensorMes">
							<p style="padding-left: 20px;">传感器编号：{{sensorList.sensor_no}}</p>
							<!--<p style="padding-left: 20px;">传感器类型</p>-->
						</li>

					</ul>
				</div>
			</div>
			<div class="mui-bar mui-bar-footer" style="text-align: center;">
				<button id="gotoActive" class="mui-btn mui-btn-royal" style="width: 100%;">去激活</button>
			</div>

		</div>
		<script>
			mui.plusReady(function() {

				var simDatas = plus.webview.currentWebview().simData;
				console.log("====" + JSON.stringify(simDatas));

				var cardHeaderID = new Vue({
					el: '#cardHeaderID',
					data: {
						simMessage: simDatas
					}
				})

				var cardContentID = new Vue({
					el: '#cardContentID',
					data: {
						sensorMes: simDatas.sensorList
					}
				})

				$("#backIDs").on('tap', function() {
					var wobj = plus.webview.getWebviewById("devicelistscanID");
					mui.fire(wobj, 'reTest');
					mui.back();
				})

				$("#gotoActive").on('tap', function() {
					$.ajax({
						type: "get",
						url: commen_confirm_active_Interface,
						async: true,
						data: {
							serial_no: simDatas.serial_no
						},
						dataType: 'json',
						success: function(resqMsg) {
							if(resqMsg.status == "SUCCESS") {
								localStorage.simID = simDatas.serial_no;
								mui.openWindow("newActivation.html")
//								window.location.href = 'newActivation.html';
							} else {}
						},
						error: function() {

						}
					});
//					mui.openWindow("carInfo_activate.html")
				})

			})
		</script>

	</body>

</html>